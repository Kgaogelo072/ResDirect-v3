<div class="min-h-screen bg-gray-50 flex">
  <!-- Sidebar -->
  <div class="bg-white shadow-lg transition-all duration-300 ease-in-out sidebar-container"
       [class.w-64]="sidebarOpen()"
       [class.w-20]="!sidebarOpen()">
    
    <!-- Logo and Toggle -->
    <div class="flex items-center justify-between p-4 border-b">
      <div class="flex items-center space-x-3" *ngIf="sidebarOpen()">
        <img src="assets/resdirect-logo.png" alt="ResDirect" class="w-8 h-8">
        <span class="text-xl font-bold text-primary">ResDirect</span>
      </div>
      <button (click)="toggleSidebar()" 
              class="p-2 rounded-lg hover:bg-gray-100 transition-colors">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
      </button>
    </div>

    <!-- Navigation Menu -->
    <nav class="mt-6">
      <div class="px-4 space-y-2">
        <!-- Overview -->
        <button (click)="setActiveTab('overview')"
                class="w-full flex items-center px-3 py-2 rounded-lg transition-colors"
                [class.bg-primary]="activeTab() === 'overview'"
                [class.text-white]="activeTab() === 'overview'"
                [class.hover:bg-gray-100]="activeTab() !== 'overview'">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M8 5a2 2 0 012-2h4a2 2 0 012 2v6a2 2 0 01-2 2H10a2 2 0 01-2-2V5z"></path>
          </svg>
          <span class="ml-3" *ngIf="sidebarOpen()">Dashboard</span>
        </button>

        <!-- Properties -->
        <button (click)="setActiveTab('properties')"
                class="w-full flex items-center px-3 py-2 rounded-lg transition-colors"
                [class.bg-primary]="activeTab() === 'properties'"
                [class.text-white]="activeTab() === 'properties'"
                [class.hover:bg-gray-100]="activeTab() !== 'properties'">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
          </svg>
          <span class="ml-3" *ngIf="sidebarOpen()">Properties</span>
        </button>

        <!-- Viewing Requests -->
        <button (click)="setActiveTab('requests')"
                class="w-full flex items-center px-3 py-2 rounded-lg transition-colors"
                [class.bg-primary]="activeTab() === 'requests'"
                [class.text-white]="activeTab() === 'requests'"
                [class.hover:bg-gray-100]="activeTab() !== 'requests'">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
          </svg>
          <span class="ml-3" *ngIf="sidebarOpen()">Viewing Requests</span>
          <span class="ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full" 
                *ngIf="sidebarOpen() && stats().pendingRequests > 0">
            {{ stats().pendingRequests }}
          </span>
        </button>

        <!-- Analytics -->
        <button (click)="setActiveTab('analytics')"
                class="w-full flex items-center px-3 py-2 rounded-lg transition-colors"
                [class.bg-primary]="activeTab() === 'analytics'"
                [class.text-white]="activeTab() === 'analytics'"
                [class.hover:bg-gray-100]="activeTab() !== 'analytics'">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
          </svg>
          <span class="ml-3" *ngIf="sidebarOpen()">Analytics</span>
        </button>
      </div>
    </nav>

    <!-- User Profile & Logout -->
    <div class="absolute bottom-0 left-0 right-0 p-4 border-t">
      <div class="flex items-center space-x-3" *ngIf="sidebarOpen()">
        <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white font-semibold">
          {{ currentUser()?.firstName?.charAt(0) }}{{ currentUser()?.lastName?.charAt(0) }}
        </div>
        <div class="flex-1 min-w-0">
          <p class="text-sm font-medium text-gray-900 truncate">
            {{ currentUser()?.firstName }} {{ currentUser()?.lastName }}
          </p>
          <p class="text-sm text-gray-500 truncate">{{ currentUser()?.role }}</p>
        </div>
      </div>
      <button (click)="logout()" 
              class="logout-button mt-3 w-full flex items-center px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors relative z-10">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
        </svg>
        <span class="ml-3" *ngIf="sidebarOpen()">Logout</span>
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col overflow-hidden">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b px-6 py-4">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-2xl font-bold text-gray-900">
            {{ activeTab() === 'overview' ? 'Dashboard Overview' :
               activeTab() === 'properties' ? 'Property Management' :
               activeTab() === 'requests' ? 'Viewing Requests' :
               activeTab() === 'analytics' ? 'Analytics' : 'Dashboard' }}
          </h1>
          <p class="text-gray-600 mt-1">
            Welcome back, {{ currentUser()?.firstName }}! Here's what's happening with your properties.
          </p>
        </div>
        <div class="flex items-center space-x-4">
          <button class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-focus transition-colors"
                  *ngIf="activeTab() === 'properties'"
                  (click)="setActiveTab('add-property')">
            <svg class="w-4 h-4 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
            </svg>
            Add Property
          </button>
        </div>
      </div>
    </header>

    <!-- Content Area -->
    <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-50 p-6">
      <!-- Dashboard Overview -->
      <div *ngIf="activeTab() === 'overview'">
        <app-dashboard-overview [stats]="stats()"></app-dashboard-overview>
      </div>

      <!-- Property Management -->
      <div *ngIf="activeTab() === 'properties'">
        <app-property-list (editProperty)="onEditProperty($event)"></app-property-list>
      </div>

      <!-- Add Property -->
      <div *ngIf="activeTab() === 'add-property'">
        <app-property-form (onSuccess)="onPropertyFormSuccess($event)" (onCancel)="onPropertyFormCancel()"></app-property-form>
      </div>

      <!-- Edit Property -->
      <div *ngIf="activeTab() === 'edit-property'">
        <app-property-form [property]="editingProperty()" (onSuccess)="onPropertyFormSuccess($event)" (onCancel)="onPropertyFormCancel()"></app-property-form>
      </div>

      <!-- Viewing Requests -->
      <div *ngIf="activeTab() === 'requests'">
        <app-viewing-requests></app-viewing-requests>
      </div>

      <!-- Analytics -->
      <div *ngIf="activeTab() === 'analytics'">
        <app-analytics-dashboard></app-analytics-dashboard>
      </div>
    </main>
  </div>
</div> 